var structureJS=void 0!==structureJS?structureJS:{options:{download_minified:!1,minified_output_tag_id:"minified",log_priority:3,preProcess:!0,minify:!0},state:{dependencyTree:{},resolvedFileList:[],pmiFileOrder:[],declaredGroups:[],groupsInTLC:{},pmiFilesSelectedForExport:"",modules:{},cache:{structureJSTag:null},doneQueue:[],context:{}},extend:function(e,t,o){if(e&&"object"!=typeof e||t&&"object"!=typeof t)throw"Error: extend param is not an an oject";for(var n in t)if(1==Array.isArray(e[n])&&1==Array.isArray(t[n]))e[n]=void 0!==o&&1==o?t[n].concat(e[n]):e[n].concat(t[n]);else if("object"==typeof e[n]&&"object"==typeof t[n])for(var i in t[n])e[n][i]=t[n][i];else e[n]=t[n]},decodeInfoObj:function(e){var t={name:""};if("string"==typeof e)t.name=e;else if("object"==typeof e){if(void 0===e.name)throw"Configuration Object Must Have Name Property";this.extend(t,e)}return t},module:function(e,t){if(void 0===e||"string"!=typeof e&&"object"!=typeof e)throw"Module Must Have Configuration Object Or Name String";if(void 0===t||"function"!=typeof t)throw"Module Must Have A Function As It's Definition";var o,n=this,i={type:"unknown"},r=null;if(void 0!==(o=this.decodeInfoObj(e)).global_dependencies){if(r=o.global_dependencies,!Array.isArray(r))throw"ERROR: global_dependencies Property Of "+o.name+"s Configuration Object Must Be An Array.";for(var a=0;a<r.length;a++)if(void 0===window[r[a]])throw"ERROR: "+o.name+" Requires "+r[a]+" To Be In Global Namespace."}function s(e){var t=null;return n.state.modules[e]&&(t=n.state.modules[e].module),t}s.amd=s,s.getType=function(e){var t=null;return n.state.modules[depName]&&(t=n.state.modules[depName].type),t},s._class=s,structureJS.require=s,i.module=t.call(structureJS.state.context,s),this.state.modules[o.name]=i},moduleAMD:function(e,t){var o={type:"amd",name:e};if(o.module=t.call(null).call(null),void 0===o.module)throw"Module Function Definition Must Return Something";this.state.modules[e]=o},declare:function(e,t){if("string"!=typeof e)throw"Parameter 'name' must be a string.";void 0!==t&&Array.isArray(t)||(t=[]),this.state.dependencyTree[e]=t},declareGroup:function(e){var t=this,o=this.decodeInfoObj(e);this.state.declaredGroups.push(o.name),this.declare(o.name),this[o.name]={};var n=this[o.name];n.state={dependencyTree:{},declaredGroups:[]},n.declare=function(e,o){t.declare.apply(n,[e,o])}},cache:function(e,t){var o=null;return 1==arguments.length&&this.state.cache[e]&&(o=this.state.cache[e]),2==arguments.length&&e&&t&&(this.state.cache[e]=t),o},setContext:function(e){this.state.context=e},extendContext:function(e){this.extend(this.state.context,e)},circular:function(e){return void 0===e?this.circular:structureJS.state.modules[e].module}};window.define=function(e,t,o){},window.define.amd={jQuery:!0},window.console&&0!=structureJS.options.log||(window.console={log:function(){},logf:function(){}});structureJS.module("Util",function(n){function t(n){return void 0!==n}return _=Object.create(null),_.isDef=function(n){return void 0!==n},_.isString=function(n){return t(n)&&"string"==typeof n},_.isFunc=function(n){return t(n)&&"function"==typeof n},_.isNull=function(n){return null==n},_.isObject=function(n){return t(n)&&Object.keys(n).length>0},_.isNullOrEmpty=function(n){return!t(n)||null===n||""===n},_.isArray=function(n){return!function(n){return null==n}(n)&&Array.isArray(n)},_.log=function(n,t=!0){if(console.log(n),t){var r=new Error;console.log(r.stack)}},_.isInt=function(n){return t(n)&&/^-?[0-9]+$/.test(n)},_.isObj=function(n){return null!=n&&("function"==typeof n||"object"==typeof n)},_.isTrue=function(n){return t(n)&&!0===n},_.isFalse=function(n){return t(n)&&!1===n},_.Default=function(n,r){return t(n)?n:r},_.mixin=function(n,t){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])},_.length=function(n){return retVal=0,_.isObj(n)&&(retVal=Object.keys(n).length),retVal},structureJS.extendContext(_),t(structureJS.done)||Object.defineProperty(structureJS,"done",{set:function(n){},get:function(){return function(n){this.state.doneQueue.push(n);var t=window.onload||function(){};window.onload=function(){t.call(null),n.call(null)}}}}),_});structureJS.module("Constants",function(E){_={},_.MODEL_ATTRIB_KEY="aplAttrib",_.MODEL_ATTRIB_REPEAT_KEY="aplRepeat",_.TARGET_ATTRIB_KEY="aplTarget",_.CTRL_KEY="aplControl",_.CTRL_ATTRIB_STRING="data-apl-control",_.IE_MODEL_ATTRIB_KEY="apl-attrib",_.IE_MODEL_REPEAT_KEY="apl-repeat",_.IE_TARGET_ATTRIB_KEY="apl-target",_.IE_CTRL_ATTRIB_KEY="apl-control",_.IE_DEFAULT_ATTRIB_KEY="apl-default",_.MAIN_CONTENT_ID="apl-content",_.CLASS_SEPARATOR=/,|\s/,_.NT_REGEX=/\w\:\w/,_.RX_TOKEN=/\{\{(\w+\.\w+)(.*)*/,_.RX_ALL_INX=/(\{\{(\w+\.\w+)([^}]*)*\}\})+?/g,_.RX_M_ATTR=/\{\{(\w+)\.(\w+)([^}]*)*/g,_.RX_M_ATTR_TOK=/\{\{(\w+)\.([\w\d_\-\.\[\]]+)\}\}+?/gm,_.RX_IDX_ITER=/\[(\w+|\d+)\]|\.(\w+)/g,_.RX_ANNOT=/%(\w+)%([^%]+)%\/(?:\w+)%/g,_.RX_RPT_M_ATTR=/(\w+\.\w+)(.*)*/g,_.RX_RPT_ALL_INX=/((\w+\.\w+)([^}]*)*)/g,_.RX_RPT_SPC_SYM=/\{\{(\$*\w+)*\}\}/g,_.TEXT_NODE=3,_.ELEMENT_NODE=1,_.UNINDEXED=-1,_.NON_TERMINAL=0,_.TERMINAL=1,_.STACK=0,_.QUEUE=1,_.COMPILE_ME=1,_.NO_COMPILE_ME=0,_.RECOMPILE_ME=-1,_.SYSTEM_EVENT_TYPES={system:"TMP_SYSTEM",interpolation_done:"interp_done",link_done:"interp_done",repeat_built:"repeat_built",framework_loaded:"fw_loaded",LIST_TYPE:_.QUEUE},_.MODEL_EVENT_TYPES={interp_change:"i_change",select_change:"s_change",checkbox_change:"cb_change"},_.RESTRICTED="RESTRICTED",_.DOM_MDL_NAME="model",_.DOM_ATTR_NAME="attrib",_.DOM_TOKEN="token",structureJS.extendContext(_)});structureJS.module("TMP_Node",function(e){var t=this,i=function(e,s,a,n){if(!(this instanceof i))return new i(e,id,s,a,n);this.node=e,this.modelName=s,this.attribName=a,this.index=t.isDef(n)?n:-1,this.symbolMap=Object.create(null),this.hasNonTerminals=!1,this.embeddedModelAttribs={},this.embeddedRepeats={},this.scope="",this.hasAttributes=!1,this.repeatModelName="",this.repeatAttribName="",this.repeatIndex=t.UNINDEXED,this.isComponent=!1,this.componentName="",this.indexQueue=[],this.token={}};return i.prototype.inheritToken=function(e){this.modelName=e.modelName,this.attribName=e.attribName,this.repeatModelName=e.repeatModelName,this.repeatAttribName=e.repeatAttribName,this.repeatIndex=e.repeatIndex,this.indexQueue=e.indexQueue.slice(0)},i});structureJS.module("ModelHeader",function(t){var e=this,i=structureJS.circular(),r=function(t,s){if(!(this instanceof r))return new r(s);for(var l in this.modelName=t,s)s.hasOwnProperty(l)&&(i("Map").annotateWithLimitProps(this,l,s[l]),Object.defineProperty(this,l,{set:function(t,r){return function(s){e.log("SET FIRED for "+r.modelName+"."+t),e.isDef(r.filterResults[t])&&delete r.filterResults[t],e.isDef(r.cachedResults[t])&&delete r.cachedResults[t],i("Map").annotateWithLimitProps(r,t,s),i("Map").setAttribute(r.modelName,t,s),i("Interpolate").interpolate(r.modelName,t,s)}}(l,this),get:function(t,e){return function(){return e.attributes[t]}}(l,this)}));this.attributes=s,this.cachedResults=Object.create(null),this.filterResults=Object.create(null),this.limitTable=Object.create(null),this.liveFilters=Object.create(null)};return r});structureJS.module("DOM",function(t){var e=structureJS.circular(),a=t("State"),l=this;return{modifyClasses:function(t,e,a){var i="",n=a.split(l.CLASS_SEPARATOR);if(!l.isNull(t)){i=t.getAttribute("class"),i=l.isNull(i)?"":i.trim();for(var r=0;r<n.length;r++)i=i.replace(n[r],"","g");t.setAttribute("class",i+" "+e)}},hideByIdList:function(t){var e=null,a=null;if(null!=t&&""!=t){a=t.split(l.CLASS_SEPARATOR);for(var i=0;i<a.length;i++)e=document.getElementById(a[i]),this.modifyClasses(e,"apl-hide","apl-show,apl-hide")}},appendTo:function(t,e){l.isDef(e)&&l.isDef(t)&&!l.isNull(e.parentNode)&&e.parentNode.insertBefore(t,t.nextSibling)},cloneAttributes:function(t,e,a){var i;a=!!l.isDef(a);if(t.hasAttributes()){attributes=t.attributes;for(var n=0;n<attributes.length;n++)"data-apl-repeat"!=attributes[n].name&&"style"!=attributes[n].name&&(0==a?e.setAttribute(attributes[n].name,attributes[n].value):(i=l.isNullOrEmpty(i=e.getAttribute(attributes[n].name))?"":i+" ",e.setAttribute(attributes[n].name,i+attributes[n].value)))}},isVisible:function(t){return!l.isNull(t)&&(t.offsetWidth>0||t.offsetHeight>0)},asynGetPartial:function(t,e,i,n){var r=new XMLHttpRequest;r.onload=e,r.fileName=t,r.targetId=i,r.targetNode=n,r.onreadystatechange=function(){4===r.readyState&&(a.compilationThreadCount--,404===r.status&&l.log('WARNING(404): FILE "'+r.fileName+'" NOT FOUND'))},l.isNullOrEmpty(r.fileName)||(a.compilationThreadCount++,r.open("get",t,!0),r.send())},fetchNestedRouteFiles:function(t,i){var n,r=new XMLHttpRequest;null!=(n=t.shift())&&(r.onload=e("Bootstrap").loadPartialIntoTemplate,r.fileName=n.partial,r.targetId=n.target,r.route=n.route,r.fallback=n.fallback||"",r.callbackOnComplete=t.onComplete||function(){},r.callbackParam1=t.slice(0),r.callbackParam1.onComplete=t.onComplete,r.callback=function(){0==this.callbackParam1.length?(this.callbackOnComplete.call(null),this.fileName=i):e("DOM").fetchNestedRouteFiles.call(null,this.callbackParam1,i)},r.onreadystatechange=function(){4===r.readyState&&(a.compilationThreadCount--,404===r.status&&(l.log('WARNING(404): FILE "'+r.fileName+'" NOT FOUND'),l.isNullOrEmpty(r.fallback)||(l.log('WARNING (404): ATTEMPTING FALLBACK ROUTE "'+r.fallback+'".'),e("Route").open(r.fallback))))},l.isNullOrEmpty(r.fileName)||(a.compilationThreadCount++,l.log("FETCHIGN: "+r.fileName),r.open("get",r.fileName,!0),r.send()))},buildOnloadList:function(t){var e=[];return l.isArray(t)&&t.forEach(function(t){l.isObj(t)?e.unshift(t.partial):(e.unshift(t),a.onloadFileQueue.unshift(t))}),e.join(",")},asynFetchRoutes:function(t,i){a.onloadFileQueue.length=0;var n=[],r=(t.route,"");n.onComplete=i||function(){},l.isArray(t.partial)?(r=this.buildOnloadList([t.route].concat(t.partial)),e("Route").deferenceNestedRoutes(t.partial,n)):(r=t.route+","+t.partial,a.onloadFileQueue.unshift(t.route),n.push(t)),this.fetchNestedRouteFiles(n,r)},insertAfter:function(t,e){var a=e.nextSibling,l=e.parentNode;return a?l.insertBefore(t,a):l.appendChild(t),t},splitText:function(t,e){var a=t.cloneNode(!1);return a.deleteData(0,e),t.deleteData(e,t.length-e),this.insertAfter(a,t),a},getHashValue:function(t){return l.isString(t)?t.substring(t.indexOf("#")).replace("#",""):""},getDataAttribute:function(t,e){var a=l.isString(e)?e.split("-"):[],i=null,n=a.slice(0,1).concat(a.slice(1).map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join("");return l.isNull(t)||(i=l.isDef(t.dataset)?t.dataset[n]:t.getAttribute("data-"+e)),l.isNull(i)?"":i},annotateDOMNode:function(t,e,a,i){t[l.DOM_MDL_NAME]=e||"",t[l.DOM_ATTR_NAME]=a||"",t[l.DOM_TOKEN]=i||t[l.DOM_TOKEN]||null},getDOMAnnotations:function(t){return{modelName:t[l.DOM_MDL_NAME],attribName:t[l.DOM_ATTR_NAME],token:t[l.DOM_TOKEN]}}}});structureJS.module("State",function(e){return{preventUpdate:!1,target:"",aplHideList:"",compilationThreadCount:0,onloadFileQueue:[],hasDeclaredRoutes:!1,compiledScopes:"",ignoreHashChange:!1,ignoreKeyUp:!1,dispatchListeners:!0,blockBodyCompilation:!1}});structureJS.module("TMP_Node",function(e){var t=this,i=function(e,s,a,n){if(!(this instanceof i))return new i(e,id,s,a,n);this.node=e,this.modelName=s,this.attribName=a,this.index=t.isDef(n)?n:-1,this.symbolMap=Object.create(null),this.hasNonTerminals=!1,this.embeddedModelAttribs={},this.embeddedRepeats={},this.scope="",this.hasAttributes=!1,this.repeatModelName="",this.repeatAttribName="",this.repeatIndex=t.UNINDEXED,this.isComponent=!1,this.componentName="",this.indexQueue=[],this.token={}};return i.prototype.inheritToken=function(e){this.modelName=e.modelName,this.attribName=e.attribName,this.repeatModelName=e.repeatModelName,this.repeatAttribName=e.repeatAttribName,this.repeatIndex=e.repeatIndex,this.indexQueue=e.indexQueue.slice(0)},i});structureJS.module("Constants",function(E){_={},_.MODEL_ATTRIB_KEY="aplAttrib",_.MODEL_ATTRIB_REPEAT_KEY="aplRepeat",_.TARGET_ATTRIB_KEY="aplTarget",_.CTRL_KEY="aplControl",_.CTRL_ATTRIB_STRING="data-apl-control",_.IE_MODEL_ATTRIB_KEY="apl-attrib",_.IE_MODEL_REPEAT_KEY="apl-repeat",_.IE_TARGET_ATTRIB_KEY="apl-target",_.IE_CTRL_ATTRIB_KEY="apl-control",_.IE_DEFAULT_ATTRIB_KEY="apl-default",_.MAIN_CONTENT_ID="apl-content",_.CLASS_SEPARATOR=/,|\s/,_.NT_REGEX=/\w\:\w/,_.RX_TOKEN=/\{\{(\w+\.\w+)(.*)*/,_.RX_ALL_INX=/(\{\{(\w+\.\w+)([^}]*)*\}\})+?/g,_.RX_M_ATTR=/\{\{(\w+)\.(\w+)([^}]*)*/g,_.RX_M_ATTR_TOK=/\{\{(\w+)\.([\w\d_\-\.\[\]]+)\}\}+?/gm,_.RX_IDX_ITER=/\[(\w+|\d+)\]|\.(\w+)/g,_.RX_ANNOT=/%(\w+)%([^%]+)%\/(?:\w+)%/g,_.RX_RPT_M_ATTR=/(\w+\.\w+)(.*)*/g,_.RX_RPT_ALL_INX=/((\w+\.\w+)([^}]*)*)/g,_.RX_RPT_SPC_SYM=/\{\{(\$*\w+)*\}\}/g,_.TEXT_NODE=3,_.ELEMENT_NODE=1,_.UNINDEXED=-1,_.NON_TERMINAL=0,_.TERMINAL=1,_.STACK=0,_.QUEUE=1,_.COMPILE_ME=1,_.NO_COMPILE_ME=0,_.RECOMPILE_ME=-1,_.SYSTEM_EVENT_TYPES={system:"TMP_SYSTEM",interpolation_done:"interp_done",link_done:"interp_done",repeat_built:"repeat_built",framework_loaded:"fw_loaded",LIST_TYPE:_.QUEUE},_.MODEL_EVENT_TYPES={interp_change:"i_change",select_change:"s_change",checkbox_change:"cb_change"},_.RESTRICTED="RESTRICTED",_.DOM_MDL_NAME="model",_.DOM_ATTR_NAME="attrib",_.DOM_TOKEN="token",structureJS.extendContext(_)});structureJS.module("Map",function(e){var t=this,i=(e("DOM"),Object.create(null)),n=(Object.create(null),Object.create(null));n[t.SYSTEM_EVENT_TYPES.system]=Object.create(null),n[t.SYSTEM_EVENT_TYPES.system].listeners=Object.create(null);var l=e("TMP_Node");return{buildAttribAlias:function(e){return"_"+e},getRepeatBaseNodes:function(e,n){var l=[];return t.isDef(n)&&t.isDef(e)&&t.isDef(i[e])&&t.isDef(i[e][n])&&(l=i[e][n]),l},pruneBaseNodes:function(e){for(var i=0;i<e.length;i++)!t.isNull(e[i].node.parentNode)&&document.body.contains(e[i].node)||(e.splice(i,1),i--)},isRepeatedAttribute:function(e,t){return this.getRepeatBaseNodes(e,t).length>0},addRepeatBaseNode:function(e){t.isDef(i[e.modelName])||(i[e.modelName]=Object.create(null)),t.isDef(i[e.modelName][e.attribName])||(i[e.modelName][e.attribName]=[]),i[e.modelName][e.attribName].push(e)},exists:function(e){return t.isDef(n[e])},contains:function(e,i){if(!t.isArray(e))return!1;for(var n=!1,l=0;l<e.length;l++)if(e[l]===i){n=!0;break}return n},isInScopeList:function(e,i,n){var l=null,r=t.isDef(e)?e.split(" "):[];i=t.isDef(i)?i.split(","):[],n=!!t.isDef(n)&&n;if(inScope=!1,i.length>0){r=r.length>1?r:[null,null],l=i.map(function(e){var t=e.split(" ");return t.length>1?t:[null,null]});for(var s=0;s<l.length;s++)if(!t.isNullOrEmpty(r[0])&&!t.isNullOrEmpty(l[s][0])&&r[0]==l[s][0]){inScope=1!=n||r[1]==l[s][1];break}}return inScope},forEach:function(e,i,l){var r=Object.create(null);if(r.endingIndex=0,r.modelName="",r.modelAtrribName="",r.hasAttributes=!1,r.stop=!1,r.target=null,r.targetCopy=null,r.key="",r.length=0,r.index=0,r.modelAttribIndex=0,r.modelAttribLength=0,r.removeItem=function(e){r.target.splice(e,1),r.index--},t.isFunc(e))for(var s in l=e,n)l.call(null,{modelName:s},s);else if(!t.isFunc(e)&&t.isFunc(i)){l=i;for(var s in t.isDef(n[e])&&t.isDef(n[e].nodeTable)?n[e].nodeTable:Object.create(null))r.modelName=e,r.modelAtrribName=s,l.call(null,r,s)}else if(!t.isFunc(e)&&!t.isFunc(i)&&t.isFunc(l)){var a=null,o={};if(t.isDef(n[e].nodeTable[i]))for(r.target=n[e].nodeTable[i].nodes,r.endingIndex=r.target.length;r.index<r.target.length&&r.index<r.endingIndex;r.index++,o={}){a=r.target[r.index];for(var u=0;u<r.target.length;u++)r.target[u].index>t.UNINDEXED&&a.scope==r.target[u].scope&&(o[r.target[u].index]=!0);r.modelAttribLength=Object.keys(o).length,r.modelName=e,r.modelAtrribName=i,r.modelAttribIndex=a.index,r.key=s,r.hasAttributes=Object.keys(r.target[r.index].symbolMap).length>0,l.call(null,r,a)}}},pushNodes:function(e,i,r,s){var a=e;if(a instanceof l||(a=new l(e,i,r,s)),!t.isDef(n[a.modelName]))throw'FATAL ERROR: Model "'+a.modelName+" Is Undeclared.";t.isDef(n[a.modelName].nodeTable[a.attribName])||(n[a.modelName].nodeTable[a.attribName]={nodes:[]}),n[a.modelName].nodeTable[a.attribName].nodes.push(a)},annotateWithLimitProps:function(e,i,n){t.isArray(n)&&!t.isDef(n.page)&&(Object.defineProperty(n,"page",{set:function(t){e.gotoPage(t).of(i)},get:function(){return e.currentPageOf(i)}}),Object.defineProperty(n,"totalPages",{set:function(e){},get:function(){return e.totalPagesOf(i)}}),Object.defineProperty(n,"limit",{set:function(t){e.limit(i).to(t)},get:function(){return t.isDef(e.limitTable[i])?e.limitTable[i].limit:0}}))},getPageSlice:function(e,i,n){var l=0,r=n.length,s=0,a=0,o=n;return t.isDef(e.limitTable[i])&&t.isArray(n)&&(a=e.limitTable[i].page,s=e.limitTable[i].limit,e.limitTable[i].totalPages=Math.floor(o.length/s),e.limitTable[i].totalPages+=o.length%s>0?1:0,l=a*s-s<(r=s*a<=n.length?s*a:n.length)?a*s-s:0,o=n.slice(l,r),this.annotateWithLimitProps(e,i,o)),o},getAttribute:function(e,i,l,r){if(!t.isDef(n[e]))return null;var s=null,a=n[e].api;return t.isDef(n[e])&&t.isDef(n[e].modelObj[i])&&(s=n[e].modelObj[i]),t.isDef(n[e].filterResults[i])&&(s=n[e].filterResults[i]),t.isDef(a.limitTable[i])&&a.limitTable[i].limit>0&&(s=this.getPageSlice(a,i,s)),t.isDef(n[e].cachedResults[i])&&(s=n[e].cachedResults[i]),t.isDef(l)&&t.isDef(r)&&t.isArray(s)&&t.isDef(s[l][r])?s=s[l][r]:t.isDef(l)&&t.isArray(s[l])&&t.isDef(s[l])&&(s=s[l]),s},dereferenceAttribute:function(e){if(!t.isDef(n[e.modelName]))return null;var i=null,l=null,r=null,s=e.indexQueue.slice(0),a=e.modelName,o=e.attribName,u=n[a].api;if(t.isDef(l=i=this.getAttribute(a,o)))if(t.isArray(l)||t.isObj(l))if(1==s.length&&"length"===s[0])i=t.isDef(u.cachedResults[o])?u.cachedResults[o].length:u.attributes[o].length;else for(;null!=(r=s.shift())&&t.isDef(l[r]);)i=l=l[r];else i=l;return i},setAttribute:function(e,i,l){return t.isDef(n[e])&&t.isDef(n[e].modelObj[i])&&(t.isArray(l)&&this.annotateWithLimitProps(n[e].api,i,l),n[e].modelObj[i]=l),null},getListeners:function(e,i){var l=[];return t.isDef(n[e].listeners[i])&&(l=n[e].listeners[i]),l},getFuncHash:function(e){var t=e.toString();return t.length+t.charAt(t.length/2)},setListener:function(e,i,l,r){if(t.isFunc(l)){var s=this.getFuncHash(l);t.isDef(r)&&1==r&&(s="_LIVE_FILTER_"+s+Math.random(),t.log("Adding duplicate with hash "+s+" on "+e+"."+i)),t.isDef(n[e].listeners[i])||(n[e].listeners[i]=Object.create(null)),n[e].listeners[i][s]=l}},removeAllListeners:function(e,t){delete n[e].listeners[t]},removeListener:function(e,t,i){var l=n[e].listeners[t],r=this.getFuncHash(i);for(var s in l)r==s&&delete l[s]},isDuplicateListener:function(e,t,i){var n=this.getListeners(e,t);for(var l in n)if(i.toString()==n[l].toString())return!0;return!1},removeFilterListeners:function(e,i){if(t.isDef(n[e].listeners[i])){var l=n[e].listeners[i];for(var r in l)0==r.indexOf("_LIVE_FILTER_")&&(t.log("REMOVING Listener with hash: "+r),delete l[r])}},getModel:function(e){var i=null;return this.exists(e)?i=n[e].api:t.log('WARNING: Attempt To Get Model "'+e+'" Failed.'),i},initModel:function(e){n[e.modelName]={modelObj:e.attributes,nodeTable:Object.create(null),api:e,listeners:Object.create(null),cachedResults:e.cachedResults,limitTable:e.limitTable,filterResults:e.filterResults}},isRepeatArrayProperty:function(e){return 1==e.indexQueue.length&&!t.isInt(e.indexQueue[0])},destroyRepeatTree:function(e,i){this.forEach(e,i,function(e,i){(i.index>-1||!document.body.contains(i.node))&&e.removeItem(e.index),!t.isNull(i.node.parentNode)&&i.index>t.UNINDEXED&&i.node.parentNode.removeChild(i.node)})},pruneDeadEmbeds:function(){var e=this;e.forEach(function(i,n){e.forEach(i.modelName,function(i,n){e.forEach(i.modelName,i.modelAtrribName,function(e,i){var n=i.node;t.isNullOrEmpty(i.repeatModelName)||t.isNullOrEmpty(i.repeatAttribName)||document.body.contains(n)||e.removeItem(e.index)})})})},pruneNodeTreeByScope:function(e){if(!t.isNullOrEmpty(e)){var i=null,n=this;n.forEach(function(l,r){n.forEach(l.modelName,function(l,r){n.forEach(l.modelName,l.modelAtrribName,function(l,r){var s=r.node;null!==(i=r.scope.split(" "))&&n.isInScopeList(r.scope,e)&&!n.isInScopeList(r.scope,e,!0)&&(l.removeItem(l.index),t.log("Pruning "+s.tagName+" for "+l.modelName+"."+l.modelAtrribName+" scope: "+i[0]+" "+i[1]))})})})}},getInternalModel:function(e){return results=null,this.exists(e)&&(results=n[e]),results},getMap:function(){return n},getRepeat:function(){return i}}});structureJS.module("Attribute.class",function(t){var n=this,r=function(t){if(!(this instanceof r))return new r;this.onCreate=function(){},this.onChange=function(){},this.name=t||""};return r.prototype.getAttribute=function(t){var r=null;return function(t){var r=!1;return n.isString(t)&&(r=n.isDef(Templar._attributes[t])),r}(t)&&(r=Templar._attributes[t]),r},r});structureJS.module("Process",function(e){var t=this,n=e("TMP_Node"),a=e("Map"),r=e("DOM"),i=structureJS.circular(),o=e("Attribute.class")();return{parseModelAttribName:function(e){var n=["",""];return t.isDef(e)&&(n=e.split(".")).length,n},buildNT:function(e){for(var n,a=e.modelName+"."+e.attribName,r=t.isArray(e.indexQueue)?e.indexQueue.slice(0):[],i="";null!=(n=r.shift(r));)i+="["+n+"]";return"{{"+a+i+"}}"},buildItemNT:function(e,t){return e.modelName+"."+e.attribName+"["+t+"]"},checkForCustomAttribute:function(e,n){var a;null!=(a=o.getAttribute(n))&&(t.isDef(e.__customAttributes__)||(e._setAttribute=e.setAttribute,e.__customAttributes__={},e.setAttribute=function(e,t){for(var n in this.__customAttributes__)this.__customAttributes__[n].name==e&&this.__customAttributes__[n].onChange.call(this.__customAttributes__[n],this,t);this._setAttribute.call(this,e,t)}),e.__customAttributes__[a.name]=a,a.onCreate.call(a,e))},preProcessNodeAttributes:function(e,r,o){var s,l,u=null,d=null,c=[],m=i("Interpolate");if(o=t.isInt(o)?parseInt(o):-1,e.hasAttributes()&&"OPTION"!=e.tagName){u=e.attributes;for(var p=0;p<u.length;p++){s=u[p].value,this.checkForCustomAttribute(e,u[p].name),l=i("Compile").getAllTokens(s);for(var h=0;h<l.length;h++)null!=d&&(null==d||l[h].modelName==d.modelName&&l[h].attribName==d.attribName)||(d=new n(e,l[h].modelName,l[h].attribName,o),a.pushNodes(d)),d.symbolMap[u[p].name]=s,d.scope=r,m.updateNodeAttributes(d,d.modelName,d.attribName),c.push(d)}}return c},_preProcessRepeatAttributes:function(e,n,a){var r,i,o,s=null,l=!1;if(e.hasAttributes()&&"OPTION"!=node.tagName){r=e.attributes;for(var u=0;u<r.length;u++){for(i=r[u].value,t.RX_RPT_SPC_SYM.lastIndex=0;null!=(s=t.RX_RPT_SPC_SYM.exec(i));)l=!0,"{{}}"==(o=s[0])&&(n.indexQueue.push(a),i=i.replace(o,this.buildNT(n)),n.indexQueue.pop()),"{{$index}}"==o&&(i=i.replace(o,a)),"{{$item}}"==o&&(i=i.replace(o,this.buildItemNT(n,a))),"{{}}"!=o&&"{{$index}}"!=o&&(n.indexQueue.push(a),n.indexQueue.push(s[1]),i=i.replace(o,this.buildNT(n)),n.indexQueue.pop(),n.indexQueue.pop());e.setAttribute(r[u].name,i)}}return l},_preprocessInPlace:function(e,n){var a,r=null;for(nonTerminal="",match=null,templateText=e.node.nodeValue,annotatedNT="",symbol="",e.hasNonTerminals=!0,a=e.node.nodeValue,t.RX_RPT_SPC_SYM.lastIndex=0;null!=(r=t.RX_RPT_SPC_SYM.exec(e.node.nodeValue));)symbol=r[0],"{{}}"==symbol&&(e.indexQueue.push(n),a=a.replace(symbol,this.buildNT(e)),e.indexQueue.pop()),"{{$index}}"==symbol&&(a=a.replace(symbol,n)),"{{$item}}"==symbol&&(a=a.replace(symbol,this.buildItemNT(TMP_baseNode,n))),"{{}}"!=symbol&&"{{$index}}"!=symbol&&(e.indexQueue.push(n),e.indexQueue.push(r[1]),a=a.replace(symbol,this.buildNT(e)),e.indexQueue.pop(),e.indexQueue.pop());for(e.node.nodeValue=a,t.RX_M_ATTR_TOK.lastIndex=0;null!=(match=t.RX_M_ATTR_TOK.exec(templateText))&&!/%(\w+)%/.test(templateText);)match[1]==e.modelName&&match[2]==e.attribName||(e.embeddedModelAttribs[match[1]+"."+match[2]]=!0,annotatedNT=match[0].replace("}}","")+"%mdl%"+e.modelName+"%/mdl%%att%"+e.attribName+"%/att%%i%"+n+"%/i%}}",e.node.nodeValue=e.node.nodeValue.replace(match[0],annotatedNT));return e.hasNonTerminals=0==e.hasNonTerminals?!t.isNullOrEmpty(e.node.nodeValue.trim()):e.hasNonTerminals,e.hasNonTerminals},_cloneBaseNode:function(e,t){var a=null,i=document.createElement(e.node.tagName.toLowerCase()),o=new n(i,e.modelName,e.attribName,t);return r.cloneAttributes(e.node,o.node),a=null==(a=e.node.getAttribute("id"))?"":o.node.setAttribute("id",a+"-"+t),o.hasNonTerminals=e.hasNonTerminals,o.node.innerHTML=e.node.innerHTML,o},_traverseRepeatNode:function(e,a,o){for(var s=null,l="",u=null,d=!1,c=0;c<e.length;c++){if(e[c].nodeType==t.ELEMENT_NODE){if(d|=this._preProcessRepeatAttributes(e[c],o,a),l=r.getDataAttribute(e[c],t.IE_MODEL_REPEAT_KEY),(u=i("Compile").getRepeatToken(l)).length>0&&(e[c].token=u[0]),!t.isNullOrEmpty(l)){e[c].setAttribute("data-"+t.IE_MODEL_REPEAT_KEY,l),u[0].modelName==o.modelName&&u[0].attribName==o.attribName||(o.embeddedRepeats[u[0].modelName+"."+u[0].attribName]=!0);continue}if(!e[c].hasChildNodes())continue;d|=this._traverseRepeatNode(e[c].childNodes,a,o)}e[c].nodeType==t.TEXT_NODE&&((s=new n(e[c],o.modelName,o.attribName,a)).inheritToken(o),d|=this._preprocessInPlace(s,a),t.mixin(s.embeddedModelAttribs,o.embeddedModelAttribs))}return d},preProcessRepeatNode:function(e,n){var a=this._cloneBaseNode(e,n),r=e.node.tmp_component,i=t.isDef(r);return a.hasNonTerminals=this._traverseRepeatNode([a.node],n,e),a.node.hasChildNodes()&&!i||(this.preProcessNode(a.node,a.scope),this.preProcessNodeAttributes(a.node,a.scope,n),i&&r.onCreate.call(r,a.node)),a},preProcessTextInput:function(e,n){n=t.isDef(n)?n:"keyup",e.addEventListener(n,function(e){var t=r.getDOMAnnotations(this);a.setAttribute(t.modelName,t.attribName,e.target.value),State.ignoreKeyUp=!0,Interpolate.interpolate(t.modelName,t.attribName,e.target.value),State.ignoreKeyUp=!1})},addCurrentSelectionToCheckbox:function(e,n){var a;t.isDef(n.current_selection)||(a=e.attrib,Object.defineProperty(n,"current_selection",{configurable:!0,set:function(e){this._value_=e;for(var t=document.querySelectorAll("input[name="+a+"]"),n=0;n<t.length;n++)t[n].value==e&&(t[n].checked=!0)},get:function(){return this._value_}}))},addCurrentSelectionToSelect:function(e,n){var i;i=e,Object.defineProperty(n,"current_selection",{configurable:!0,set:function(e){if(""!=e){var n=r.getDOMAnnotations(i);this._value_=e;for(var o=0;o<i.children.length;o++)i.children[o].value==e&&(i.selectedIndex=o,State.dispatchListeners=!1,Interpolate.interpolate(n.modelName,n.attribName),State.dispatchListeners=!0,Interpolate.dispatchListeners(a.getListeners(n.modelName,n.attribName),{type:t.MODEL_EVENT_TYPES.select_change,value:i.children[o].value,text:i.children[o].text,index:i.selectedIndex}))}},get:function(){return this._value_}})},bindCheckboxListener:function(e){e.addEventListener("click",function(e){var n=a.dereferenceAttribute(this.token),i={type:t.MODEL_EVENT_TYPES.checkbox_change,checked:!0===e.target.checked,value:e.target.value,target:e.target},o=r.getDOMAnnotations(this);i.properties=o.token.indexQueue||[],n._value_=1==i.checked&&e.target.value,n.checked[this.getAttribute("id")]=i.checked,State.dispatchListeners=!1,Interpolate.interpolate(o.modelName,o.attribName),State.dispatchListeners=!0,Interpolate.dispatchListeners(a.getListeners(o.modelName,o.attribName),i)})},preProcessInputNode:function(e,o){var s,l=e.getAttribute("type")||"",u=i("Compile").getTokens(e.getAttribute("value")),d=(i("Interpolate"),t.COMPILE_ME);if(!(u.length<1)){switch(s=u[0],r.annotateDOMNode(e,s.modelName,s.attribName,s),l=l.toLowerCase()){case"checkbox":case"radio":var c,m=null,p="",h="",b=!1,N="";if(c=a.dereferenceAttribute(s),t.isArray(c)){c._value_="",t.isDef(c.checked)||(c.checked={});for(var _=0;_<c.length;_++,b=!1)t.isDef(c[_].description)||t.isDef(c[_].value)?(p=t.isDef(c[_].value)?c[_].value:p,h=t.isDef(c[_].description)?c[_].description:h,b=t.isDef(c[_].checked)?c[_].checked:b):p=h=c[_],N=t.isDef(c[_].id)?c[_].id:_,(m=new n(document.createElement("input"),s.model,s.attrib,_)).scope=o,m.inheritToken(s),m.node.setAttribute("name",s.attribName),m.node.setAttribute("id",N),r.annotateDOMNode(m.node,s.modelName,s.attribName,s),t.isDef(c.checked[N])&&(b=c.checked[N]),c.checked[N]=b,1==b&&(c._value_=p,m.node.setAttribute("checked",b)),r.cloneAttributes(e,m.node),m.node.setAttribute("value",p),this.addCurrentSelectionToCheckbox(e,c),e.parentNode.insertBefore(m.node,e),e.parentNode.insertBefore(document.createTextNode(h),e),this.bindCheckboxListener(m.node),a.pushNodes(m)}e.parentNode.removeChild(e),d=t.RECOMPILE_ME;break;case"text":this.preProcessTextInput(e);break;case"date":this.preProcessTextInput(e),this.preProcessTextInput(e,"blur");break;default:this.preProcessTextInput(e)}return d}},preProcessNode:function(e,o,s){if(t.isDef(e)&&null!==e){s=t.isInt(s)?parseInt(s):-1;var l=r.getDataAttribute(e,t.IE_MODEL_REPEAT_KEY),u=t.isNullOrEmpty(l)?e.tagName:"REPEAT",d=[],c=null,m=null,p=t.COMPILE_ME;switch(u){case"SELECT":var h;if(t.RX_M_ATTR.lastIndex=0,(d=i("Compile").getTokens(e.innerHTML)).length<1)break;h=d[0],e.innerHTML="",r.annotateDOMNode(e,h.modelName,h.attribName,h),(m=new n(e,h.modelName,h.attribName)).inheritToken(h),m.scope=o,Interpolate.intializeSelect(m,!0,0),a.pushNodes(m),e.addEventListener("change",function(e){var n=a.dereferenceAttribute(this.token),i={type:t.MODEL_EVENT_TYPES.select_change,value:e.target.options[e.target.selectedIndex].value,text:e.target.options[e.target.selectedIndex].text,index:e.target.selectedIndex},o=r.getDOMAnnotations(this);n.current_selection=i.value,Interpolate.dispatchListeners(a.getListeners(o.modelName,o.attribName),i)});break;case"INPUT":p=this.preProcessInputNode(e,o);break;case"TEXTAREA":this.preProcessInputNode(e,o);break;case"REPEAT":var b=r.getDOMAnnotations(e);(c=new n(e,b.modelName,b.attribName)).inheritToken(e.token),c.scope=o,a.addRepeatBaseNode(c),p=t.NO_COMPILE_ME}return document.body.contains(e)&&this.preProcessNodeAttributes(e,o,s),p}}}});structureJS.module("Interpolate",function(e){var t=this,a=e("TMP_Node"),n=e("Map"),r=e("DOM"),o=e("Process"),d=e("System"),i=structureJS.circular();return{dispatchListeners:function(e,a){if(t.isDef(e)&&1==State.dispatchListeners)for(var n in e)t.isFunc(e[n])&&e[n].call(null,a)},dispatchSystemListeners:function(e){if(!t.isNullOrEmpty(e)){var a=d.getSystemListeners(e);t.SYSTEM_EVENT_TYPES.system;if(t.SYSTEM_EVENT_TYPES.LIST_TYPE==t.QUEUE)for(var n=0;n<a.length;n++)t.isFunc(a[n])&&a[n].call(null);else if(t.SYSTEM_EVENT_TYPES.LIST_TYPE==t.STACK)for(n=a.length-1;n>=0;n--)t.isFunc(a[n])&&a[n].call(null)}},updateNodeAttributes:function(e,a,r){var o={},d=e.node;if(d.hasAttributes()&&0==e.isComponent){for(var l,s,p="",u="",b="",c="",m=d.attributes,N=0;N<m.length;N++)if(b=m[N].name,u=t.isDef(e.symbolMap[b])?e.symbolMap[b]:"",!t.isNullOrEmpty(u=e.symbolMap[b])){s=i("Compile").getAllTokens(u);for(var T=0;T<s.length;T++)c=n.dereferenceAttribute(s[T]),t.isArray(c)&&(c=s[T].fullToken),u=p=u.replace(s[T].fullToken,c);d.setAttribute(b,p),o[b]=p}}else if(1==e.isComponent&&(Templar._components[e.componentName],(l=Object.keys(e.symbolMap)).length>0)){s=i("Compile").getTokens(e.symbolMap[l[0]]);for(T=0;T<s.length;T++)d.setAttribute(l[0],n.dereferenceAttribute(s[T]))}return o},interpolateSpan:function(e){var a=e.node,r=n.dereferenceAttribute(e);a.innerText=a.innerHTML=t.isArray(r)||t.isObj(r)?"":r},getPageSlice:function(e,a,n){var r=0,o=n.length,d=0,i=0,l=n;return t.isDef(e.limitTable[a])&&(r=(i=e.limitTable[a].page)*(d=e.limitTable[a].limit)-d<(o=d*i<=n.length?d*i:n.length)?i*d-d:0,l=n.slice(r,o)),l},getPageSliceData:function(e,a,n){var r=0,o=n.length,d=0,i=0,l=Object.create(null);return l.start=-1,l.length=0,t.isDef(e.limitTable[a])&&(r=(i=e.limitTable[a].page)*(d=e.limitTable[a].limit)-d<(o=d*i<=n.length?d*i:n.length)?i*d-d:0,l.start=r,l.length=o),l},interpolateEmbeddedRepeats:function(e,a){var d,l,s,p,u,b;for(var c in e.embeddedRepeats)if(e.embeddedRepeats.hasOwnProperty(c)&&(p=(b=o.parseModelAttribName(c))[0],u=b[1],d=n.getRepeatBaseNodes(p,u),n.pruneBaseNodes(d),!t.isNull(l=d[a]))){if(r.isVisible(l.node.parentNode)&&t.isArray(s=n.dereferenceAttribute(l)))for(var m=0;m<s.length;m++)TMP_repeatedNode=o.preProcessRepeatNode(l,m),TMP_repeatedNode.scope=l.scope,n.pushNodes(TMP_repeatedNode),0==TMP_repeatedNode.hasNonTerminals&&(TMP_repeatedNode.node.innerHTML=s[m]),l.node.parentNode.insertBefore(TMP_repeatedNode.node,l.node),i("Compile").compile(TMP_repeatedNode.node,l.scope,m);l.node.setAttribute("style","display:none;")}},intializeSelect:function(e,r,d){var i=!t.isNullOrEmpty(e.repeatModelName)&&!t.isNullOrEmpty(e.repeatAttribName);run=r?r&&i:!r&&!i;var l,s,p,u,b=n.dereferenceAttribute(e),c=e.modelName,m=e.attribName,N=b._value_;if((o.addCurrentSelectionToSelect(e.node,b),run&&t.isArray(b))&&(1==(d>0&&0==e.node.children.length)&&n.forEach(e.modelName,e.attribName,function(t,a){"OPTION"==a.node.tagName&&t.modelAttribIndex<d&&e.node.appendChild(a.node)}),b.length>d)){l=b.length-d,s=b.length-l;for(var T=0;T<l;T++,s++,d++){var f=new a(document.createElement("option"),c,m,s);f.inheritToken(e),f.node.text=t.isDef(p=b[s].text)?p:b[s],f.node.value=t.isDef(u=b[s].value)?u:b[s],e.node.appendChild(f.node),f.scope=e.scope,e.node.selectedIndex=0,e.node.selectedIndex=t.isNullOrEmpty(N)||f.node.value!=N?e.node.selectedIndex:T,n.pushNodes(f)}}},interpolate:function(e,a,l,s){if(n.exists(e)){listeners=n.getListeners(e,a),Interpolate=this,attribCurrState=n.getAttribute(e,a),updateObject=Object.create(null),numNodesToAdd=0,numNodesToRemove=0,newNodeStartIndex=0,TMP_repeatBaseNode=null,updateObj=Object.create(null),nodeScopeParts=null,node=null,tagName="",attributes=null,n.forEach(e,a,function(p,u){if(!t.isDef(s)||n.isInScopeList(u.scope,s))switch(node=u.node,tagName=1==u.isComponent?"COMPONENT":node.tagName,tagName=1!=n.isRepeatedAttribute(e,a)||n.isRepeatArrayProperty(u)?node.tagName:"REPEAT",1==p.hasAttributes&&(updateObject=Interpolate.updateNodeAttributes(u,e,a)),tagName){case"SELECT":Interpolate.intializeSelect(u,!1,p.modelAttribLength);break;case"OPTION":if(t.isArray(l=n.dereferenceAttribute(u))){var b=node.parentNode;l.length<=p.modelAttribLength&&p.modelAttribIndex<l.length&&(node.text=t.isDef(text=l[p.modelAttribIndex].text)?text:l[p.modelAttribIndex],node.value=t.isDef(value=l[p.modelAttribIndex].value)?value:l[p.modelAttribIndex],b.selectedIndex=t.isDef(l[p.modelAttribIndex].selected)&&1==l[p.modelAttribIndex].selected?p.modelAttribIndex:b.selectedIndex),updateObj.value=b.options[b.selectedIndex].value,updateObj.text=b.options[b.selectedIndex].text,updateObj.type=t.MODEL_EVENT_TYPES.interp_change,updateObj.index=b.selectedIndex,updateObj._attrib_=l,p.modelAttribIndex>=l.length&&(p.removeItem(p.index),b.removeChild(node))}break;case"SPAN":Interpolate.interpolateSpan(u),updateObj.text=node.innerText,updateObj.value=node.innerText,updateObj.type=node.tagName.toLowerCase();break;case"INPUT":attributes=r.getDOMAnnotations(u.node),attributes.modelName==u.modelName&&attributes.attribName==u.attribName&&(t.isArray(l=n.dereferenceAttribute(u))||0!=State.ignoreKeyUp||(node.value=l),updateObj.text=node.value,updateObj.value=node.value,updateObj.type=node.tagName.toLowerCase(),updateObj.target=node);break;case"TEXTAREA":u.node.value=l,updateObj.text=node.value,updateObj.value=node.value,updateObj.type=node.tagName.toLowerCase(),updateObj.target=node;break;case"REPEAT":var c,m=null;p.endingIndex=0,n.destroyRepeatTree(e,a),c=n.getRepeatBaseNodes(e,a),n.pruneBaseNodes(c);for(var N=0;N<c.length;N++){if(TMP_repeatBaseNode=c[N],document.body.contains(TMP_repeatBaseNode.node)&&t.isArray(l=n.dereferenceAttribute(TMP_repeatBaseNode))&&l.length>0){for(var T=0;T<l.length;T++)(m=o.preProcessRepeatNode(TMP_repeatBaseNode,T)).scope=TMP_repeatBaseNode.scope,n.pushNodes(m),0==m.hasNonTerminals&&(m.node.innerHTML=l[T]),TMP_repeatBaseNode.node.parentNode.insertBefore(m.node,TMP_repeatBaseNode.node),i("Compile").compile(m.node,TMP_repeatBaseNode.scope,T),Interpolate.interpolateEmbeddedRepeats(TMP_repeatBaseNode,T);n.pruneDeadEmbeds(),Interpolate.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.repeat_built),d.removeSystemListeners(t.SYSTEM_EVENT_TYPES.repeat_built),updateObj.type="repeat",updateObj.value=l}TMP_repeatBaseNode.node.setAttribute("style","display:none;")}}}),t.isDef(updateObj.type)&&(updateObj.type==t.MODEL_EVENT_TYPES.interp_change&&(updateObj._attrib_._value_=updateObj.value),Interpolate.dispatchListeners(listeners,updateObj))}}}});structureJS.module("Compile",function(e){var t=this,n=e("TMP_Node"),l=e("Map"),a=e("DOM"),r=e("Interpolate"),o=e("Process"),i=e("State"),s=e("Token.class"),u=structureJS.circular();return{getTokens:function(e,n){var l,a=new s,r=null,i=null,u=[],d=t.RX_TOKEN,p=t.RX_ALL_INX;for(t.isDef(n)&&1==n&&(d=t.RX_RPT_M_ATTR,p=t.RX_RPT_ALL_INX),d.lastIndex=0,p.lastIndex=0,t.RX_IDX_ITER.lastIndex=0,t.RX_ANNOT.lastIndex=0;null!=(r=p.exec(e));){var N,T=null,c=t.isDef(r[3])?r[3]:"",m=null;for(a.start=r.index,a.end=p.lastIndex,a.fullToken=r[1],null!=(i=d.exec(a.fullToken))&&(l=o.parseModelAttribName(i[1]),a.modelName=l[0],a.attribName=l[1]);null!=(T=t.RX_IDX_ITER.exec(r[3]));)N=t.isDef(T[1])?T[1]:T[2],a.indexQueue.push(N);for(;null!=(m=t.RX_ANNOT.exec(c));)switch(m[1]){case"mdl":a.repeatModelName=m[2];break;case"att":a.repeatAttribName=m[2];break;case"i":a.repeatIndex=m[2]}u.push(a),a=new s}return u},getRepeatToken:function(e){return this.getTokens(e,!0)},getAllTokens:function(e){return this.getTokens(e)},compile:function(e,s,d){if(t.isNull(e)||t.isNull(e.childNodes))return s;d=t.isInt(d)?parseInt(d):-1;var p=e.getAttribute("data-apl-default"),N=e.getAttribute("id"),T=1==i.blockBodyCompilation&&N==t.MAIN_CONTENT_ID;t.isNullOrEmpty(p)||T||(e.setAttribute("data-apl-default",""),a.asynGetPartial(p,u("Bootstrap").loadPartialIntoTemplate,null,e),t.log("Spawning Thread <"+p+"> w/ target <"+e.id+"> w/ scope <"+s+">"));for(var c=e.childNodes,m=[],E=null,_=null,h=null,f=null,b=null,A=0,g="",O="",I="",k=(t.NO_COMPILE_ME,0);k<c.length;k++)if(h=(f=c[k]).parentNode,f.nodeType!=t.TEXT_NODE||t.isNull(h)||"OPTION"===h.tagName){if(f.nodeType==t.ELEMENT_NODE){var M,x=f.tagName.toLowerCase(),D=Templar._components[x],C=null,R=null;if(t.isDef(D)&&!t.isNullOrEmpty(D.templateContent)&&!t.isNull(f.parentNode)){var P;if(f.insertAdjacentHTML("afterend",D.templateContent),C=f.nextElementSibling,1==D.transclude)if(!t.isNullOrEmpty(P=C.getElementsByTagName("CONTENT"))){P=P[0];for(var X=0;X<f.childNodes.length;X++)t.isNull(P.parentNode)||P.parentNode.insertBefore(f.childNodes[X],P),X--;t.isNull(P.parentNode)||P.parentNode.removeChild(P)}C.tmp_component=D,a.cloneAttributes(f,C,!0),R=o.preProcessNodeAttributes(C,s,d),t.isDef(C._setAttribute)?C._setAttributeWrapper=C.setAttribute:C._setAttribute=C.setAttribute,C.setAttribute=function(e,n){var l,a=this.tmp_component;t.isFunc(l=a.attributes[e])&&l.call(a,this,n),t.isDef(this._setAttributeWrapper)?this._setAttributeWrapper.call(this,e,n):this._setAttribute.call(this,e,n)};for(var L=0;L<R.length;L++)R[L].isComponent=!0,R[L].componentName=x;D.onCreate.call(D,C),M=a.getDataAttribute(f,t.IE_MODEL_REPEAT_KEY),f.parentNode.removeChild(f),f=C,t.isNullOrEmpty(M)||f.setAttribute("data-"+t.IE_MODEL_REPEAT_KEY,M),k++}switch(M=a.getDataAttribute(f,t.IE_MODEL_REPEAT_KEY),!t.isNullOrEmpty(M)&&(m=this.getRepeatToken(M)).length>0&&a.annotateDOMNode(f,m[0].modelName,m[0].attribName,m[0]),o.preProcessNode(f,s,d)){case t.COMPILE_ME:this.compile(f,s,d);break;case t.NO_COMPILE_ME:break;case t.RECOMPILE_ME:k--}}}else{g=f.nodeValue,m=this.getTokens(g);for(var v=0;v<m.length;v++){h.tagName,O=m[v].modelName,I=m[v].attribName;_=document.createElement("span");if((b=new n(_,O,I)).inheritToken(m[v]),b.scope=s,b.index=d,E=a.splitText(f,m[v].start-A),A+=f.nodeValue.length,E.nodeValue.trim()==m[v].fullToken&&(b.node.innerText=E.nodeValue,r.interpolateSpan(b),h.replaceChild(b.node,E),l.pushNodes(b)),f.nodeValue.trim()==m[v].fullToken&&(b.node.innerText=f.nodeValue,r.interpolateSpan(b),h.replaceChild(b.node,f),l.pushNodes(b)),(f=c[++k]).nodeType!=t.TEXT_NODE)break;if(E=a.splitText(f,m[v].end-A),A+=f.nodeValue.length,E.nodeValue.trim()==m[v].fullToken&&(b.node.innerText=E.nodeValue,r.interpolateSpan(b),h.replaceChild(b.node,E),l.pushNodes(b)),f.nodeValue.trim()==m[v].fullToken&&(b.node.innerText=f.nodeValue,r.interpolateSpan(b),h.replaceChild(b.node,f),l.pushNodes(b)),(f=c[++k]).nodeType!=t.TEXT_NODE)break}m.length=0,A=0}return s}}});structureJS.module("ClassModelSort",function(e){var t=this,r=e("ModelHeader"),i=e("Map"),a=e("Interpolate");r.prototype.sort=function(e,r,l){var o=Object.create(null),s=this,n=t.isDef(s.limitTable[e])?s.limitTable[e].page:0,p=0;return o.target=i.getAttribute(s.modelName,e),t.isDef(r)&&r>0&&t.isDef(s.limitTable[e])&&(n=s.limitTable[e].page,s.limitTable[e].page=r,o.target=i.getPageSlice(s,e,o.target)),o.propName=null,o.prevProps=[],o.insertSortedSlice=function(e,r,l,o){if(t.isDef(r.limitTable[l])){r.limitTable[l].page=t.isDef(o)?o:n,p=r.limitTable[l].limit,r.limitTable[l].limit=0;var s=r.attributes[l];r.limitTable[l].limit=p;var u=a.getPageSliceData(r,l,s),g=null;if(u.start>-1&&!t.isNull(e)){g=s.slice(0);for(var m=0,c=u.start;m<e.length&&c<u.length;m++,c++)g[c]=e[m];i.setAttribute(r.modelName,l,g.slice(0)),r.limitTable[l].page=n}}},o.arePastPropsAligned=function(e,t){for(var r=!0,i=0;i<o.prevProps.length;i++)r&=e[o.prevProps[i]]==t[o.prevProps[i]];return r},o.getSorter=function(e){return t.isFunc(e)?function(t,r){var i=e.call(null,t,r);return i=1==o.arePastPropsAligned(t,r)?i:0}:o.sorter},o.sorter=function(e,r){var i=e,a=r,l=(e=t.isNull(o.propName)?e:e[o.propName],r=t.isNull(o.propName)?r:r[o.propName],0);return t.isDef(e)&&t.isDef(r)?(l=r==e?0:r<e?1:-1,l=1==o.arePastPropsAligned(i,a)?l:0):0},o.orderBy=function(t,i){return o.propName=t,o.target.sort(o.getSorter(i)),o.insertSortedSlice(o.target,s,e,r),o.prevProps.push(t),o},o.thenBy=function(t,i){return o.propName=t,o.target.sort(o.getSorter(i)),o.insertSortedSlice(o.target,s,e,r),o.prevProps.push(t),o},o.target.sort(o.getSorter(l)),o.insertSortedSlice(o.target,s,e,r),o},r.prototype.sortCurrentPageOf=function(e){Object.create(null);var r=this.limitTable[e];if(t.isDef(r))return this.sort(e,r.currentPage)}});structureJS.module("ClassModelPage",function(t){var e=this,a=t("ModelHeader"),o=t("Map"),r=t("Interpolate");a.prototype.limit=function(t){var a=Object.create(null),r=this,i=0,l=0;return a.to=function(a){delete r.limitTable[t],i=o.getAttribute(r.modelName,t),e.isArray(i)&&a>=0&&(l=Math.floor(i.length/a),l+=i.length%a>0?1:0,r.limitTable[t]={limit:a,page:1,totalPages:l,currentPage:1},r.update(t))},a},a.prototype.gotoPage=function(t){var a=Object.create(null),i=this,l=null;return a.of=function(a){l=i.limitTable[a],e.isDef(l)&&t>0&&t<=l.totalPages&&(l.page=l.currentPage=t,r.interpolate(i.modelName,a,o.getAttribute(i.modelName,a)))},a},a.prototype.gotoNextPageOf=function(t){var a=this.limitTable[t];e.isDef(a)&&a.currentPage+1<=a.totalPages&&this.gotoPage(++a.currentPage).of(t)},a.prototype.gotoPreviousPageOf=function(t){var a=this.limitTable[t];e.isDef(a)&&a.currentPage-1>0&&this.gotoPage(--a.currentPage).of(t)},a.prototype.currentPageOf=function(t){var a=this.limitTable[t],o=0;return e.isDef(a)&&(o=a.currentPage),o},a.prototype.totalPagesOf=function(t){var a=this.limitTable[t],o=0;return e.isDef(a)&&(o=a.totalPages),o}});structureJS.module("ModelFilter",function(e){var t=this,i=e("ModelHeader"),l=e("Map"),r=e("Interpolate");i.prototype.filterWarapper=function(e,i,n,s,u,a,o){if(t.isDef(u)&&1==u&&delete this.cachedResults[e],t.isDef(o)&&1==o)return 0!=s.call(null,n)||(t.isNullOrEmpty(n)&&r.interpolate(this.modelName,e,l.getAttribute(this.modelName,e)),!1);var p=[],c=l.getAttribute(this.modelName,e),f=null;if(c=l.getPageSlice(this,e,c),t.isArray(c)){for(var m=0;m<c.length;m++)f=c[m],!t.isNullOrEmpty(i)&&t.isDef(f[i])?itemValue=f[i]:itemValue=f,1==(1==a?s.call(null,itemValue):!t.isNullOrEmpty(n)&&s.call(null,n,itemValue))&&p.push(f);p.length<1?(delete this.cachedResults[e],1==u&&(p=l.getAttribute(this.modelName,e),r.interpolate(this.modelName,e,p))):(this.cachedResults[e]=p,t.isDef(a)&&1==a&&(this.filterResults[e]=p),r.interpolate(this.modelName,e,p))}return!0},i.prototype.filter=function(e){var i=Object.create(null),r=this,n=!0,s=void 0,u=function(e,i){return!t.isNullOrEmpty(i)&&!t.isNullOrEmpty(e)&&0==i.toString().toLowerCase().indexOf(e.toLowerCase())};return i.propName="",i.isStatic=!1,i.liveAndFuncs=[],i.using=function(a){return t.isFunc(a)?(n=!1,s=!0,i.isStatic=!0,r.filterWarapper(e,i.propName,null,a,n,s)):(t.isDef(r.liveFilters[e])||(r.liveFilters[e]=[]),r.liveFilters[e].push(a),l.setListener(r.modelName,a,function(l){n=i.liveAndFuncs.length<1;for(var a=!0,o=!1,p=0;p<i.liveAndFuncs.length&&1==a;p++){var c=1==i.liveAndFuncs[p].length;a=i.liveAndFuncs[p].funct.call(null,l.text,i.propName,c),o|=!c}t.log("overrideDefaultLiveFilter: "+o),1==a&&0==o&&r.filterWarapper(e,i.propName,l.text,u,n,s)},!0)),i},i.by=function(e){return i.propName=e,i},i.andBy=function(e){return i.propName=e,i},i.and=function(l){return t.isFunc(l)&&(i.liveAndFuncs.push({funct:function(t,u,a){return s=i.isStatic,n=!i.isStatic,r.filterWarapper(e,u,t,l,n,s,a)},length:l.length}),i.liveAndFuncs.sort(function(e,t){return 1!=e.funct.length}),n=!1,1==(s=1==l.length)&&r.filterWarapper(e,i.propName,null,l,n,s)),i},i},i.prototype.resetLiveFiltersOf=function(e){var i=null;if(t.isDef(this.liveFilters[e])){i=this.liveFilters[e];for(var r=0;r<i.length;r++)l.removeFilterListeners(this.modelName,i[r])}},i.prototype.resetStaticFiltersOf=function(e){delete this.filterResults[e]}});structureJS.module("ClassModelAPI",function(t){var e=this,i=t("ModelHeader"),s=t("Map"),a=t("Interpolate");t("State");i.prototype.softset=function(t,i){this.cachedResults[t]=i,a.interpolate(this.modelName,t,i),delete this.cachedResults[t],e.isDef(this.limitTable[t])&&(this.limitTable[t].page=1)},i.prototype.update=function(t){a.interpolate(this.modelName,t,s.getAttribute(this.modelName,t))},i.prototype.listen=function(t,e){s.isDuplicateListener(this.modelName,t,e)||s.setListener(this.modelName,t,e)},i.prototype.unlisten=function(t,i){e.isFunc(i)?s.removeListener(this.modelName,t,i):e.isString(t)&&s.removeAllListeners(this.modelName,t)},i.prototype.save=function(){var t;for(var i in e.isDef(this.attributes.__meta__)||(this.attributes.__meta__={}),this.attributes){var s=this.attributes[i];if(e.isArray(s))for(var a in s)s.hasOwnProperty(a)&&!e.isInt(a)&&(e.isDef(this.attributes.__meta__[i])||(this.attributes.__meta__[i]={}),this.attributes.__meta__[i][a]=e.isString(s[a])?s[a]:JSON.stringify(s[a]))}return t=JSON.stringify(this.attributes),delete this.attributes.__meta__,e.isDef(window.sessionStorage)&&(window.sessionStorage[this.modelName]=t),t},i.prototype.load=function(t){var i,s=!1;e.isDef(window.sessionStorage)&&!e.isDef(t)&&(t=window.sessionStorage[this.modelName],window.sessionStorage.removeItem(this.modelName));try{i=JSON.parse(t)}catch(t){s=!0}if(1!=s){var a,r,o;for(var n in i)"__meta__"!=n&&(this[n]=i[n]);if(e.isDef(a=i.__meta__))for(var n in a)for(var l in r=a[n])if(e.isDef(this.attributes[n])){try{o=JSON.parse(r[l])}catch(t){o=r[l]}"_value_"==l&&(this.attributes[n].current_selection=o),this.attributes[n][l]=o}}else e.log("ERROR: Frozen item was not proper JSON. Thaw failed.")}});structureJS.module("Link",function(e){var t=this,n=e("Map"),o=e("Interpolate"),r=e("System");return{bindModel:function(e){Object.create(null);n.forEach(function(t,r){n.forEach(r,function(t,r){o.interpolate(t.modelName,t.modelAtrribName,n.getAttribute(t.modelName,t.modelAtrribName),e)})}),State.compiledScopes="",o.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.link_done),r.removeSystemListeners(t.SYSTEM_EVENT_TYPES.link_done)}}});structureJS.module("Component.class",function(t){var e=function(t,n,i){if(!(this instanceof e))return new e;this.attributes=t||Object.create(null),this.onCreate=n||function(){},this.templateURL=i||"",this.templateContent="",this.templateStyle=null,this.transclude=!1};return e});structureJS.module("Token.class",function(t){var e=this,i=function(t,s){if(!(this instanceof i))return new i(t,s);this.start="",this.end="",this.fullToken="",this.modelName=t||"",this.attribName=s||"",this.repeatModelName="",this.repeatAttribName="",this.repeatIndex=e.UNINDEXED,this.indexQueue=[]};return i});structureJS.module("Route",function(t){var e=this,r=Object.create(null),o=[],u=!1,a=function(){return!0},n=!1,l=function(){return!0},i=function(){return!0},s=e.isDef(Storage)?sessionStorage:{},c=t("State"),h=t("DOM"),f=t("Map"),R=t("Interpolate");structureJS.circular();return{routeTree:Object.create(null),buildRouteTree:function(t){for(var u=Object.create(null),a=Object.create(null),n=null,l="",i=null,s=null,h=!1,f=!1,R="",d=null,N=null,T=null,O=null,E="",p="",g="",D=0;D<t.length;D++){o.push(t[D]),d=t[D].route.trim().split("/"),E=t[D].target,p=t[D].partial,g=t[D].fallback,i=u,s=a;for(var A=0;A<d.length;A++)if(""!=d[A]&&"#"!=d[A]){if(N=e.NT_REGEX.test(d[A])?e.NON_TERMINAL:e.TERMINAL,T=A+1<d.length?d[A+1]:null,O=e.isNull(T)?null:e.NT_REGEX.test(T)?e.NON_TERMINAL:e.TERMINAL,N==e.NON_TERMINAL&&O==e.NON_TERMINAL)throw"ERROR: Route Contains two consecutive variables.";l=N==e.NON_TERMINAL?d[A]:d[A].toLowerCase(),n=e.NT_REGEX.test(d[A])?"NT":l,e.isDef(i[l])||(i[l]=Object.create(null),i[l].endOfChain=!1,i[l].thisVal=l,i[l].thisType=N,h=!0),i[l].lookaheadVal=O==e.NON_TERMINAL?T:"",i[l].lookaheadType=O,e.isDef(s[n])||(s[n]=Object.create(null),f=!0),i=i[l],s=s[n],R=t[D].route}if(!h&&1==i.endOfChain)throw'Error: Duplicate Route "'+t[D].route+'" Detected';if(!f)throw'Error: Ambiguous Route "'+t[D].route+'" Detected';i.endOfChain=!0,i.route=R,i.partial=e.isDef(p)?p:"",i.target=e.isDef(E)?E:"",i.fallback=e.isDef(g)?g:"",h=!1,f=!1}this.routeTree=r=u,c.hasDeclaredRoutes=!0},addRoute:function(t){o.push(t),this.buildRouteTree(o)},resolveRoute:function(t){var o=t.trim().split("/"),u=[],a="";routePart=r;for(var n=0;n<o.length;n++)if(""!=o[n]&&"#"!=o[n]&&(e.isDef(routePart.lookaheadType)&&routePart.lookaheadType==e.NON_TERMINAL?(a=routePart.lookaheadVal,u.push([a,o[n]])):a=o[n].toLowerCase(),routePart=routePart[a],!e.isDef(routePart)))throw'Error: Route "'+t+'" not found';if(1!=routePart.endOfChain)throw'Route "'+t+'" was only a partial match of declared routes.';return e.log("Route matched: "+t+" with "+routePart.route),routePart.nonTerminalValues=u,routePart},setAuthenticator:function(t){!1===n?(e.isFunc(t)&&(l=t),n=!0):e.log("ERROR: Authenticator already set")},setDeAuthenticator:function(t){e.isFunc(t)&&(i=t),n=!0},setAuthorizer:function(t){!1===u?(e.isFunc(t)&&(a=t),u=!0):e.log("ERROR: Authenticator already set")},authorize:function(t){return a.call(s,t)},authenticate:function(t){return l.call(s,t)},logout:function(t){return i.call(s,t)},handleRoute:function(t){var r=h.getHashValue(t),o=(document.getElementById(""),null),u=null,a=null;if(1==c.hasDeclaredRoutes)try{if(!0!==this.authorize.call(s,{route:r}))throw o=e.RESTRICTED,"User not authorized for url: "+t;(o=Route.resolveRoute(r)).target=e.isNullOrEmpty(o.target)?e.MAIN_CONTENT_ID:o.target,u=o.nonTerminalValues;for(var n=0;n<u.length;n++)a=u[n][0].split(":"),f.setAttribute(a[0],a[1],u[n][1]),R.interpolate(a[0],a[1],u[n][1])}catch(t){e.log(t)}return o},open:function(t){null!=(resolvedRouteObj=this.handleRoute(t))&&resolvedRouteObj!==e.RESTRICTED&&h.asynFetchRoutes(resolvedRouteObj,function(){c.ignoreHashChange=!0;var t,e=window.location.href;(t=e.indexOf("#"))>-1&&(e=window.location.href.slice(0,t)),window.location.href=e+resolvedRouteObj.route})},openPartial:function(t,r){r=e.isDef(r)?r:e.MAIN_CONTENT_ID;e.isNullOrEmpty(t)||h.asynGetPartial(t,Bootstrap.loadPartialIntoTemplate,r)},isRoute:function(t){for(var e=!1,r=0;r<o.length;r++)o[r].route==t&&(e=!0);return e},getRouteObj:function(t){for(var e=null,r=0;r<o.length;r++)o[r].route==t&&(e=o[r]);return e},deferenceNestedRoutes:function(t,r){var o,u=null,a="";for(t=t.slice(0);null!=(u=t.shift());)(o=e.isString(u))&&this.isRoute(u)?(a=this.getRouteObj(u),e.isArray(a.partial)?this.deferenceNestedRoutes(a.partial,r):r.push(a)):o?r.push({partial:u,target:e.MAIN_CONTENT_ID}):r.push(u)}}});structureJS.module("Templar",function(t){var e=this,n=t("Map"),a=t("Route"),o=t("ModelHeader"),r=t("System"),i=(t("DOM"),t("Attribute.class")),s=t("Component.class"),l=function(t){};return l._onloadHandlerMap=Object.create(null),(l._components=Object.create(null)).length=0,(l._attributes=Object.create(null)).length=0,l.success=function(t,n){var a=!0;if(e.isDef(this._onloadHandlerMap[t])||(this._onloadHandlerMap[t]=[]),e.isFunc(n)){for(var o=0;o<this._onloadHandlerMap[t].length;o++)a&=this._onloadHandlerMap[t][o].toString()!=n.toString();1==a&&this._onloadHandlerMap[t].push(n)}e.isFunc(t)&&r.setSystemListeners(e.SYSTEM_EVENT_TYPES.framework_loaded,function(){t.call(null)})},l.getPartialOnlodHandler=function(t){var n=[];return e.isDef(this._onloadHandlerMap[t])&&(n=this._onloadHandlerMap[t]),n},l.getModel=function(t){return n.getModel(t)},l.dataModel=function(t,e){n.initModel(new o(t,e))},l.Route=function(t){a.buildRouteTree(t)},l.setAuthorizer=function(t){a.setAuthorizer(t)},l.setAuthenticator=function(t){a.setAuthenticator(t)},l.setDeAuthenticator=function(t){a.setDeAuthenticator(t)},l.done=function(t){r.setSystemListeners(e.SYSTEM_EVENT_TYPES.link_done,t)},l.attribute=function(t,n){if(e.isString(t)&&e.isDef(n)){var a=new i(t.toLowerCase()),o=function(){},r=function(){};for(var s in n)if(n.hasOwnProperty(s))switch(s){case"onCreate":o=n.onCreate,a.onCreate=o=e.isFunc(o)?o:function(){};break;case"onChange":r=n.onChange,a.onChange=r=e.isFunc(r)?r:function(){}}a.onCreate=function(t){a.onChange.call(a,t,t.getAttribute(a.name)),o.call(a,t)},l._attributes[a.name]=a}},l.component=function(t,n){if(e.isString(t)&&e.isDef(n)){var a=new s;for(var o in n)if(n.hasOwnProperty(o))switch(o){case"templateURL":a.templateURL=n.templateURL,e.isNullOrEmpty(a.templateURL)&&e.log('WARNING: Component declaration for "'+t+'" ignored. Declaration must have a URL.');break;case"attributes":var r=n.attributes;try{for(var i in a.attributes=e.isObject(r)?r:Object.create(null),a.attributes)a.attributes[i]=e.isFunc(a.attributes[i])?a.attributes[i]:function(){}}catch(t){e.log('Component "attributes" is not an object'),a.attributes=Object.create(null)}break;case"onCreate":var c=n.onCreate;a.onCreate=e.isFunc(c)?c:function(){}}e.isNullOrEmpty(a.templateURL)||e.isDef(l._components[t.toLowerCase()])?e.log('WARNING: Component "'+t+'" is declared more than once. Only the last declaration will be used.'):(l._components[t.toLowerCase()]=a,l._components.length++)}},l.RouteObj=a,l.Map=n,window.Templar=l,l});structureJS.module("Bootstrap",function(e){var t=this,l=e("Map"),i=e("Link"),o=e("State"),a=e("Compile"),n=e("DOM"),r=e("Route"),s={setTarget:function(e){o.target=n.getDataAttribute(e.target,t.IE_TARGET_ATTRIB_KEY),o.target=t.isNullOrEmpty(o.target)?"":o.target},fireOnloads:function(e){for(var l="",i=null,a=e.split(","),n=!1,r=0;r<o.onloadFileQueue.length;r++)if(l=o.onloadFileQueue[r],a.forEach(function(e){n|=e==l}),1==n){l=o.onloadFileQueue.splice(r,1),i=Templar.getPartialOnlodHandler(l),t.log("Firing "+i.length+" handlers(s) for: "+l);for(var s=0;s<i.length;s++)i[s].call(null);r--}t.log("Un-Fired on queue: "+o.onloadFileQueue.toString())},bindTargetSetter:function(){var e=document.getElementsByTagName("a");if(null!=e)for(var t=0;t<e.length;t++)e[t].addEventListener("click",this.setTarget)},loadPartialIntoTemplate:function(){if(200==this.status){var e=this.responseText,n=this.fileName,u=t.isNullOrEmpty(this.targetId)?t.MAIN_CONTENT_ID:this.targetId.replace("#",""),c=t.isNull(this.targetNode)?document.getElementById(u):this.targetNode,d=(document.location.href,n+" "+(new Date).getTime()),g=this.callback||function(){};t.isNull(c)?(t.log('WARNING: TARGET NODE NOT FOUND FOR ROUTE "'+this.route+'".'),t.isNullOrEmpty(this.fallback)||(t.log('WARNING: ATTEMPTING FALLBACK ROUTE "'+this.fallback+'".'),r.open(this.fallback))):(c.innerHTML=e,t.log("Compiling <"+n+"> w/ scope <"+d+">"),o.compiledScopes+=d+",",a.compile(c,d),o.onloadFileQueue.unshift(this.fileName),g.call(this),o.compilationThreadCount<=0&&(l.pruneNodeTreeByScope(o.compiledScopes),i.bindModel(o.compiledScopes),s.fireOnloads(this.fileName),s.bindTargetSetter(),o.compilationThreadCount=0))}}};return s});structureJS.module("Export",function(e){var t=this;function o(e){Interpolate.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.framework_loaded),System.removeSystemListeners(t.SYSTEM_EVENT_TYPES.framework_loaded),Bootstrap.bindTargetSetter(),t.log("Running bootstrap Complete: "+e)}function n(e){State.compiledScopes+=e+",",null!=(resolvedRouteObj=Route.handleRoute(window.location.href))&&(t.isNullOrEmpty(resolvedRouteObj.partial)||(routeContentNode=document.getElementById(resolvedRouteObj.target),defaultKey=DOM.getDataAttribute(routeContentNode,t.IE_DEFAULT_ATTRIB_KEY),t.isNull(routeContentNode)||t.isNullOrEmpty(defaultKey)||routeContentNode.setAttribute("data-"+t.IE_DEFAULT_ATTRIB_KEY,""),DOM.asynFetchRoutes(resolvedRouteObj,function(){t.log("asynFetchRoutes complete for "+resolvedRouteObj.route),o("ASYN FETCH ROUTES")}),State.blockBodyCompilation=!0)),0==State.blockBodyCompilation?(Compile.compile(document.getElementsByTagName("body")[0],e),Link.bindModel(State.compiledScopes),o("BODY COMPILATION")):t.log("WARNING: Body compilation has been blocked")}DOM=e("DOM"),Map=e("Map"),State=e("State"),Bootstrap=e("Bootstrap"),Compile=e("Compile"),Templar=e("Templar"),Route=e("Route"),Link=e("Link"),Interpolate=e("Interpolate"),Process=e("Process"),System=e("System"),structureJS.done(function(){t.isDef(console)||(console={log:function(){}});document.getElementById("apl-content");var e="body "+(new Date).getTime();window.onhashchange=function(e){if(!0!==State.ignoreHashChange){var o;null!=(o=Route.handleRoute(window.location.href))&&DOM.asynFetchRoutes(o,function(){t.log("asynFetchRoutes complete for "+o.route)})}else State.ignoreHashChange=!1};var o=Templar._components.length;for(cName in Templar._components)if("length"!==cName){var a,l=Templar._components[cName];a=function(){var t=this.targetNode,o=document.createElement("div"),a=o.getElementsByTagName("style"),l=document.getElementsByTagName("head")[0];State.compilationThreadCount--,o.innerHTML=this.responseText,t.transclude=o.getElementsByTagName("content").length>0;for(var r=0;r<a.length;r++)0==r?l.appendChild(a[r]):o.removeChild(a[r]);t.templateContent=o.innerHTML,--Templar._components.length<1&&n(e)},t.isNullOrEmpty(l.templateURL)||DOM.asynGetPartial(l.templateURL,a,"",l)}o<1&&n(e)})});structureJS.module("System",function(e){var s=this,t=e("Map");return{setSystemListeners:function(e,i){var r=s.SYSTEM_EVENT_TYPES.system,n=t.getMap(),u=n[r].listeners[r];s.isFunc(i)&&(s.isDef(u)||(u=n[r].listeners[r]=Object.create(null)),s.isDef(u[e])||(u[e]=[]),u[e].push(i))},getSystemListeners:function(e){var i=s.SYSTEM_EVENT_TYPES.system,r=t.getMap()[i].listeners[i],n=[];return s.isNullOrEmpty(e)||s.isDef(r)&&s.isDef(r[e])&&(n=r[e]),n},removeSystemListeners:function(e){var i=s.SYSTEM_EVENT_TYPES.system,r=t.getMap()[i].listeners[i];s.isNullOrEmpty(e)||s.isDef(r)&&s.isDef(r[e])&&delete r[e]}}});